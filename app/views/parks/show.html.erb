<div class="container">
  <div class="row">
    <div class="col-md-12 imgContainer">
      <%= image_tag(@park.main_image) %>
    </div>


    <div class="col-md-7">
      <h1><%= @park.name %> National Park, <%= @park.location %></h1>
      <h4>Est. <%= @park.established %></h4>
      <h5><%= @park_rec_info["RecAreaPhone"] %></h5>
      <p><%= @park_rec_info["RecAreaDescription"] %></p>
      <div class="row">
        <div class="col-md-9">
          <% if @park_rec_photos["RECDATA"].count > 0 %>
            <div id="rec-gov-carousel" class="carousel slide" data-ride="carousel" data-interval="7000">
              <!-- Wrapper for slides -->
              <div class="carousel-inner" role="listbox">
                <div class="item active">
                    <%= image_tag(@first_park_rec_photo["URL"]) %>
                  <div class="carousel-caption">
                    <%= @first_park_rec_photo["Description"] %>
                  </div>
                </div>
                <% if @remaining_park_rec_photos.count > 0 %>
                <% @remaining_park_rec_photos.each do |photo| %>
                <div class="item">
                  <%= image_tag (photo["URL"]) %>
                  <div class="carousel-caption">
                    <%= photo["Description"] %>
                  </div>
                </div>
                <% end %>
                <% end %>
              </div>

              <!-- Controls -->
              <a class="left carousel-control" href="#rec-gov-carousel" role="button" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="right carousel-control" href="#rec-gov-carousel" role="button" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    <div class ="col-md-5">
      <div class="row">
      <% if current_user == nil %>
        <%= link_to "Sign In to Plan Your Trip + <br />See Recent Instagram Photos".html_safe, '/auth/instagram', class:"btn btn-warning pull-right" %>
      </div>
      <% else %>
    </div>
    <div class="col-md-5">
      <div class="row">
        <%= link_to "Plan Your Trip", new_park_trip_path(@park), class:"btn btn-warning" %>
      </div>
      <div class="row">
        <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#instagramModal">
          See Instagram Photos
        </button>
      </div>
    </div>

      <% end %>
    </div>
    <div class="col-md-5 pull-right">
      <div class="row">
        <% if @park_links["RECDATA"].count > 0 %>
        <div class="panel panel-primary">
          <div class="panel-heading">
            <h3 class="panel-title">Helpful Links from Recreation.gov</h3>
          </div>
          <% @park_links["RECDATA"].each do |link| %>
          <div class="panel-body">
            <%= link_to link["Title"], link["URL"], :target => "_blank" %>
          </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>



<!-- Modal -->
<div class="modal fade" id="instagramModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header text-center">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel"><%=@park.name%> National Park Instagram Photos
      </div>
      <% if @doi_photos["data"].count > 0 && @photos["data"].count > 0 %>
        <div class="modal-body text-center">
          <% if current_user != nil %>
            <% @doi_photos["data"].each do |photo| %>
              <% if photo["location"]!= nil && (photo["location"]["name"]).include?(@park.name) || photo["data"]!= nil && (photo["data"]["tags"]).include?(@park.name)%>
                <%= link_to image_tag(photo["images"]["thumbnail"]["url"]), photo["link"], :target => "_blank" %>
              <% end %>
            <% end %>

            <% @photos["data"].each do |photo| %>
              <%= link_to image_tag(photo["images"]["thumbnail"]["url"]), photo["link"], :target => "_blank" %>
            <% end %>
          <% end %>
        </div>
      <% else %>
        <div class="modal-body text-center">
          <p>Bummer, it looks like there aren't any recent Instagram photos from <%= @park.name %> National Park. Get out there and take some!</p>
          <p><%= link_to "Plan Your Trip", new_park_trip_path(@park), class:"btn btn-warning" %></p>
        </div>
      <% end %>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
